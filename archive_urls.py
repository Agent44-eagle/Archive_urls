from module import wayback_urls , otx , urlscan , commoncrawl , get_live_urls_fast
from tqdm import tqdm
import time 
from colorama import init, Fore, Back, Style

def main():
    try:
        print(Fore.GREEN + "................................................................................................")
        print(Fore.GREEN + "...................::...........................................................................")
        print(Fore.GREEN + "..................^!!~:..........................................................................")
        print(Fore.GREEN + "...................:~!!~:........................................................................")
        print(Fore.GREEN + "......................^!!!^:.....................................................................")
        print(Fore.GREEN + ".......................~!!!~.....................:::^^^^^^^^^^^:::...............................")
        print(Fore.GREEN + "....................:^!!^^^...................^^~~!!!!!!!!!!!!!!!!!!^^::.........................")
        print(Fore.GREEN + "...................^!!~:...................::^~~!~^^^::.:.::..::::^^^!!!!!!~^:..................")
        print(Fore.GREEN + "..................:~::....................::~!!!!~:....................:::^^!!7~~~:..............")
        print(Fore.GREEN + "............................:!!!~~~~~!~:.:^~!7!^^:.............................:^~~!7!~~^:........")
        print(Fore.GREEN + ".............................^^^^^^^^^^:.~!!!!^......................................^^^^~!!^:....")
        print(Fore.GREEN + "........................................^!!^::.............................................:^!!~^^:")
        print(Fore.GREEN + ".......................................:~!!~:..................................................::^~!!!!^:")
        print(Fore.GREEN + "......................................:~!~^:........................................................:^!!7!~:")
        print(Fore.GREEN + ".....................................:~7!:.............................................................:^~!!~~:")
        print(Fore.GREEN + "...................................~!!^^.................................................................:^~!!~:")
        print(Fore.GREEN + "..................................~~~^..............................................:::^^....................:^~!~::")
        print(Fore.GREEN + ".................................:!~:.........................................::^~~~!!~~~.......................:!!~^:")
        print(Fore.GREEN + "................................:~!^........................................:^~!!!~^^:............................:~!!^:")
        print(Fore.GREEN + "................................:!!^.....................................:^~~~!~^::..................................:^!!^:")
        print(Fore.GREEN + "................................!!:...................................::~!!~:::.......::^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^::!7~:...:")
        print(Fore.GREEN + "................................!!:..................................:!!~^::......:^^^^!!7!!!!!!!!!!~~~~~~~~~~~~~~~~7!!!~!!!:")
        print(Fore.GREEN + "...............................:~!^................................:^~!~::.....:::~!!!~!~!^:::::::.::................:!!!!!7^:")
        print(Fore.GREEN + "..............................:~!^................................^!!^:......:^~~!!^^::...............................:~!!!~:")
        print(Fore.GREEN + "..............................~!!..............................^!!^:......~!!~::......^!!!!^:^:::........................:~7!:")
        print(Fore.GREEN + ".............................^!!^............................:!!~:.....:~!!^:.........:^^^~~~!7!!~~~^:::..................:!!~:")
        print(Fore.GREEN + "............................~!!^...........................:^!^:....::~!~^:.................::^^!!!77!!!~^^:...............^!!~~^::")
        print(Fore.GREEN + "...........................:!!~:.............................:......~!~^.......................:!!!~^^^^^^!!~~^^:.......:^^::^!!!!!~^^:")
        print(Fore.GREEN + "...........................^!!:...................................:!!^:........................:!!~^....:^!!~~~~^....::^~!!~..::::~~!!!~^:")
        print(Fore.GREEN + ".........................:~!!~:................................:^~!~::..........................:~!!~~~~~~~~:........^!!^^::........::~~!!^:")
        print(Fore.GREEN + ".........................^!!!.................................^~!~:...............................:^::~!^:........:^~!~:.....................:~7^:")
        print(Fore.GREEN + ".........................^!!^................................:!!^:.....................................:........:^!!~:.....................:~!!:")
        print(Fore.GREEN + ".........................~!!................................:!!:..............................................:~!!~:........................:~!!:")
        print(Fore.GREEN + "........................~!~:...............................^!7:............................................^:~~^::............................:!!^:")
        print(Fore.GREEN + "........................~!^...............................^!!^.........................................::^~~:::................................:~!^:")
        print(Fore.GREEN + ".......................:!~^...............................~!~...................................:::^^~~~^^^:::::::::............................^!!^:")
        print(Fore.GREEN + ".......................!!:...............................^!~^..............................::^^~~!!!!~!!~!~~!!~!!~!~~^^^^::::...................:^!!:")
        print(Fore.GREEN + "......................:!7:...............................!7^...............................~!!!~^^^^^^^^::::::::::::^~!!!!!~~!^::................:!!:")
        print(Fore.GREEN + "......................:!7:..............................^!!^...............................:::::^^^~!~~!!~~~~~~^::::::::::::.~~~~~~:::...........:!!:")
        print(Fore.GREEN + "......................:!!:..............................!7!:...........................................::^::~!!!!!!~!!!!!~~~~~~^^^^~!!~~~:......:~!:")
        print(Fore.GREEN + "......................:!!:..............................~!:..............................................::^^~!!~~~::^^^^^^^~~~~~~^^~~~~!!~:....^!~:")
        print(Fore.GREEN + ".......................~!^:.............................~!~:...........................................:^!!!!!!~.:......................:~!!~:.~!^:")
        print(Fore.GREEN + "........................~!~:............................~!!^..........................................:!!!^::~!!~.........................^!!!~7~:")
        print(Fore.GREEN + ".........................~!!:...........................^!!^.........................................:!!^:...:~!!..........................^!77^:")
        print(Fore.GREEN + ".........................:^!!:...........................!!~:........................................~!^:.....:^!~..........................^!^:")
        print(Fore.GREEN + ".........................:^!!!^..........................~!!~......................................:~!~:....:..:!!::")
        print(Fore.GREEN + "......................:^~~!!^!~~^........................:~!~......................................^!~.......:.:!!~^::")
        print(Fore.GREEN + "...................:~~~!!~^::.:^!!~:..........:............^!!~....................................^~!:.......:.:~!^^~!~~:::::")
        print(Fore.GREEN + "...............:::^~^~^^^::......::^!!~:.....................:^!!^:.................................:~~:..........:~!..:^^~~!!^^::")
        print(Fore.GREEN + ".............:^~!!!^.................^!!~^:....................:^!~:................................~!~..........:^!~:....:~~!!!~^:")
        print(Fore.GREEN + "...........:^~!!~^^:...................:^^~!~^:...................^!!~...............................!!^.........:~!!........:^~!~^:")
        print(Fore.GREEN + ".........:~!!~^:...........................:~!!!~:..................^~!:............................:~^..........^!~:..........:^!!:")
        print(Fore.GREEN + "........:~~7!::................................::^!!!^::...............:!!~:..........................^:.........:~!~:............:!~^:")
        print(Fore.GREEN + ".......^7!^^......................................:^^!!~~^:..............:!!~^..................................^!!:...............^7~:")
        print(Fore.GREEN + "......:~7^:.............................................::^!~^:.............::~!^:.............................:~!:.................:!^:")
        print(Fore.GREEN + ".....^~!^..................................................^~~~~^..............:~~~:...........................:^:..................:!!~~^^^^:^~~^^^~~~~^^~^^^^^^^^^::^^:")
        print(Fore.GREEN + "....~!~^......................................................:::.................^^.......^^^^^^^^^:^^^^^^^^^^::^^^^^::^^::^::::^^^^^^^^^^^^^^:!!:")
        print(Fore.GREEN + "...^!~:.................................................................................:~~!~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~!~~~~~~~~~~~~~~~~~~~~~~~!!!^:~7^:")
        print(Fore.GREEN + ":~!:....................:~:...........................................................:!!^.....................................................................................:~7^:")
        print(Fore.GREEN + "~!^.....................^!!^..........................................................!!^......................................................................................^7!:")
        print(Fore.GREEN + "^!^........................^!~^......................................................:^!!:.....................................................................................:~!^:")
        print(Fore.GREEN + "!!:.........................:^!~.....................................................^!7:......................................................................................^!~:")
        print(Fore.GREEN + ":!^............................:!~...................................................:~!!:.....................................................................................^!!:")
        print(Fore.GREEN + "!!:.............................:!~:.................................................~!!:.....................................................................................:~!^:")
        print(Fore.GREEN + "!................................!7^................................................:!!~......................................................................................~!~:")
        print(Fore.GREEN + "!!................................^7~:...............................................~7~:......................................................................................!!~:")
        print(Fore.GREEN + "^7!.................................~!^..............................................:!!^......................................................................................~7~:")
        print(Fore.GREEN + ":^!:.................................:!~..............................................!7^:......................................................................................7!^:")
        print(Fore.GREEN + "^!~...................................~~.............................................^7^:......................................................................................:7::")
        print(Fore.GREEN + "~!^........................::::.......:^...:::::::::::::::::::.:....................:!7:...........................................:::::::....................................:!7::")
        print(Fore.GREEN + ":!~.....................:^^~!~^^:.:^^^~~!!^~!!!!!!!!!!!!!!!!!!~!!^^:.................:!!...........................................:~~^^^^^...................................:~!^:")
        print(Fore.GREEN + "~!^.................:^~~~^:::::~~~~~~^^~~^~^^~^^~^^^^^^:::::^::::^^~~~::......:.....:^!:......................................................................................^!!:")
        print(Fore.GREEN + "~!:.............::^~~^::.::^~~~^:::................................::^~!~^:.........^7~......................................................................................:~!~:")
        print(Fore.GREEN + ":!!:.............~^^^...:^!!!~:..............................~~::.......^~!!^.......^!!.......................................................................................^!!::")
        print(Fore.GREEN + "!7~...................:~!!~:..........................^^^::..^!!!^:.......:^!~^...:.~7~.......................................................................................!!~:")
        print(Fore.GREEN + "!7~..................:!!^:............................:~!!!^..:::~!~^:......:77^...^!!~......................................................................................^!~:")
        print(Fore.GREEN + "!7!................:~::.................................:^~7~.....:~!~:......^!~:..!!~.......................................................................................!~^:")
        
        print(Fore.CYAN + "\n" + "="*100)
        print(Fore.CYAN + "                    URL COLLECTOR TOOL - GATHERING LIVE LINKS / Created by AGENT44 
        print(Fore.CYAN + "="*100 + "\n")
        print("welcome to my toll  have a good day ")
        domain = input("[+] Enter your domain or subdomain: ").strip()
        if not domain:
            print(Fore.RED + "Error: domain or subdomain doesn't exist" + Style.RESET_ALL)
            return
        
       
        otx_api_key = "33586a5c44c01736bf1e84d6a8ce2f6ffdc747a20c16bcf97bf256f3996eacac"  
        urlscan_api_key = "0199304a-534a-7149-b7ac-9898f985402f" 
        
        print(Fore.BLUE + "Start collecting urls  " + Style.RESET_ALL)
        print(Fore.BLUE + "Sources: Waybackurls, Urlscan, Otx Alienvault, Commoncrawl" + Style.RESET_ALL)
        
        all_urls = []
        all_urls.extend(commoncrawl(domain))
        all_urls.extend(otx(domain, otx_api_key))
        all_urls.extend(urlscan(domain, urlscan_api_key))
        all_urls.extend(wayback_urls(domain))

        unique_urls = list(set(all_urls))
        live_urls = get_live_urls_fast(unique_urls)

        print(f"\nResults:")
        print(Fore.YELLOW + f"Total aggregated links: {len(all_urls)}" + Style.RESET_ALL)
        print(Fore.GREEN + f"Total unique urls: {len(unique_urls)}" + Style.RESET_ALL)
        print(Fore.BLUE +f"Total live urls: {len(live_urls)}" + Style.RESET_ALL)

        if live_urls: 
            filename = f"{domain}_live_urls.txt"
            with open(filename, "w") as f:
                for url in live_urls:
                    f.write(url + "\n")
            print(f"Done, the file saved in {filename}")
        else:
            print(" Oups , No live URLs found")
    except KeyboardInterrupt:
        print("\nProcess interrupted by user")
    except Exception as e:
        print(Fore.RED + "Something went wrong:" + Style.RESET_ALL , e )

if __name__ == "__main__":
    main()